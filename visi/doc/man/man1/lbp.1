.TH LBP 1 LINLIB
.SH ИМЯ
lbp \- Компилятор вынесенных описаний страниц
.SH
.ES
 +----------+   БИБЛИОТЕКА ВВОДА-ВЫВОДА
(c) linlib  !   ДЛЯ АЛФАВИТНО-ЦИФРОВЫХ
 +----------+   ВИДЕОТЕРМИНАЛОВ
.EE
.SH ФОРМАТ
.ES 1
 lbp file.la file.lb
     file.la - исходный текст описания
     file.lb - бинарный файл описания страницы

.EE

.SH ОПИСАНИЕ
.PP
Команда входит в инструментальный комплекс LINLIB,
служит для подготовки описаний вынесенных из программы
страниц. В команде обязательны два аргумента -
имена входного и выходного файлов.
.PP
Файл, полученный в результате работы lbp,
помещается в определенное место файловой системы,
обычно каталог
.EX /usr/line/ИМЯ_ПРОГРАММЫ,
откуда считывается функцией b_page (см. lin4(3x)).
его формат описан в файле linebp.h.
.PP
Формат исходного файла напоминает статическое описание
страницы на языке Си (Структура LINE определена в файле "line.h").
Исходный файл содержит
комментарии и строки описания, по одной строке описания на
каждую линию страницы.
.PP
Строки комментария начинаются со знака '#'.
Строки описания начинаются с однобуквенного идентификатора
атрибута линии. Строка содержит позиционные параметры, которые
разделяются пробелами.
В зависимости от логического типа линии, который указывается
атрибутами, требуется разное количество параметров в строке
описания.
.PP
Формат строк описания приведен ниже, даны номера позиций параметров
и в скобках идентификаторы полей структуры типа LINE,
определенной в файле line.h.
.JP "1 (attr)"
атрибуты;
.JP "2 (size)"
размер поля на экране;
.JP "3 (line)"
номер строки;
.JP "4 (colu)"
номер столбца;
.JP "5 (flag)"
флаги задержек, аналогично определенным в файле line.h,
но состоящие из одной буквы;
.JP "6 (cvts)"
строка форматного преобразования:
.JP "7 (cvtf)"
функция форматного преобразования;
.JP "8 (test)"
тестирующая функция;
.JP "9 (varl)"
переменная;

.PP
параметрами могут быть следующие выражения:
.JP "знак '-' или '*' "
Параметр получает значение "пусто", нельзя использовать
для задания параметров размера и положения поля на экране.
.JP "целые числа, состоящие из десятичных цифр"
Размеры и положение поля на экране, задание этих параметров обязательно.
.JP "идентификатор, не более 6 знаков символьного кода"
Строка символов, не более 6 знаков, начинется обычно с
буквы. По этому имени функция b_page при считывании скомпилированного
описания подставит адрес, указанный в паре с таким же именем
в таблице типа IN_PORTS (см. lin4.3x).
.JP "строка символов в двойных кавычках"
Строка символов, ограниченная с двух сторон знаком '"'.
Подставляется на месте параметров, допускающих использование
указателей на символьные строки.
Для использования знака '"' внутри строки символов
он повторяется дважды.
.PP
Атрибуты определяют требуемое количество
параметров в строке описания.
Описание должно начинаться одним из ключевых атрибутов
g, i, h, или c. Остальные атрибуты можно
комбинировать, аналогично статическим описаниям
в программах.
.PP
Если не оговорено, требуется присутствие всех параметров.
параметры могут принимать следующие значения:
.JP g
Общее описание, возможно задание любых значений,
используется в основном для построения описаний таблиц -
во вторичнух элементах таблиц.
.JP i
Линия доступна для ввода (input).
.JP h
Линия заголовка (header), требуются поля 1,2,3,4,9.
.JP c
Линия комментариев (comments), требуются поля 1,2,3,4,9.
.JP p
Линия с подсказкой (prompted).
.JP v
линия связана с обычной переменной, например со строкой символов.
.JP a
Линия связана с переключателем.
.JP m
Линия для работы с меню.
.JP t
Линия является базой таблицы.
.PP
Поле флагов задержек заполняется аналогичным образом,
ниже приведены возможные флаги:
.JP u
нет перехода вверх;
.JP d
нет перехода вниз;
.JP l
нет перехода влево;
.JP r
нет перехода вправо;
.JP n
нет перехода по символам новой строки (CR или LF);
.JP t
линия содержит смещение для построения таблицы. Применяется
в комбинации с одним из флагов 'u' или 'l', что в данном
слуЧае обозначает, в каком направлении искать базу таблицы.
.SH ПРИМЕРЫ
.ES


#  ДВЕ ЛИНИИ -- ЗАГОЛОВОК И КОММЕНТАРИЙ
H   80  1  1 " ВСЕ СЛУЧАИ ..."
C   18 12  1 "ТЕКСТОВЫЕ СТРОКИ"
#  ТРИ ЛИНИИ ДЛЯ ВВОДА
IP  10 12 20 -  -       -       -       in1
IP  11 18 35 -  -       cvt     test    dv
IP  11 18 65 -  "%10d"  -       -       dv

.EE
.SH ДОПОЛНИТЕЛЬНЫЕ ССЫЛКИ
ldemo(1), visi(3x), linlib(3x), lin3(3x), lin4(3x).
.SH ДИАГНОСТИКА
Нарушения ситаксиса в основном отслеживаются, но
возможно, требуются и более подробные диагностические сообщения.
.SH ЗАМЕЧАНИЯ
В настоящее время не используется напрямую формат lbp. Более
удобно пользоваться форматом visi.
