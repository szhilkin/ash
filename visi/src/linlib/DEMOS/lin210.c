/*
**      +----------+    βιβμιοτελα χχοδα-χωχοδα
**     (c) linlib  !    δμρ αμζαχιτξο-γιζςοχωθ
**      +----------+    χιδεοτεςνιξαμοχ
**/

/*
 *      $Header: lin210.c,v 1.1 90/12/27 16:28:54 vsv Rel $
 *
 *      $Log:	lin210.c,v $
 * Revision 1.1  90/12/27  16:28:54  vsv
 * χεςσιρ LINLIB_3
 * 
 * Revision 3.4  89/08/29  15:14:53  vsv
 * χεςσιρ LINLIB_3
 * 
 * Revision 3.3  88/07/28  09:23:43  vsv
 * ςαβοτα σ λμαχιϋεκ 'DEL' πςιχεδεξα λ οβύενυ χιδυ
 * 
 * Revision 3.2  88/06/27  15:19:23  vsv
 * ςεχιϊιρ αςθιχα RCS
 * 
 * Revision 3.1  88/04/29  12:24:13  vsv
 * ςαϊδεμεξω ταβμιγω ι πςογεδυςω,
 * ινεετσρ δχα ςαϊξωθ νοδυμρ
 * 
 */

#include <stdio.h>
#include "line.h"
#include "line0.h"
#include "lineva.h"

/*
 * ξαστςοκλα ξα τιπ τεςνιξαμα
 *
 * termcap ξε σοχσεν υδοβεξ, ταλ λαλ
 * τςεβυετ πυθμοηο λοδα, λοτοςωκ
 * ισπομψϊυετσρ τομψλο οδιξ ςαϊ.
 * χοϊνοφξο, μυώϋε ξαστςοκλυ ιϊ termcap
 * ηοτοχιτψ οτδεμψξο, ϊατεν χ υφε υπαλοχαξξον χιδε
 * σώιτωχατψ ϊα οδξο οβςαύεξιε λ ζακμυ.
 * πςινεώαξιε.  ςαβοταεν
 * σ termcap, τομψλο HELP χωτασλιχαεν πο λμΰώυ :lh= ... :
 *
 * χ ότον ζακμε οβ'χμεξω δαξξωε, τςεβυενωε δμρ
 * οπισαξιρ χοϊνοφξοστεκ τεςνιξαμα.
 * νοφξο οβ'ρχιτψ χσε στςολι ΕΣΓ-ποσμεδοχατεμψξοστεκ
 * λοξσταξτανι, ι ζυξλγιΰ hw_set λαλ πυστυΰ -
 * ςαϊνες λοδα ισπομξρΰύεκ βιβμιοτελι
 * υνεξψϋιτσρ ϊα σώετ ποτεςι ξεϊαχισινοστι οτ
 * τιπα τεςνιξαμα.
 */


/* χξεϋξιε πεςενεξξωε δμρ tgoto() ιϊ termcap */
char *UP = NULL;        /* πεςενεστιτψ λυςσος χχεςθ ξα 1 ποϊιγιΰ */
char *BC = NULL;        /* ---------""------- χμεχο -----""----- */

/* ςαϊνεςω όλςαξα */
int     maxli = 24;     /* ςαϊνες πο χεςτιλαμι */
int     maxco = 80;     /* --"-- πο ηοςιϊοξταμι */


/*---------------------*/
/* οπισαξιε λμαχιατυςω */
/*---------------------*/

KBF   kbf[] = {

/*      λοδ χοϊχςαύαετσρ πο ϊαπςοσυ r_key();
 *      χτοςωε όμενεξτω ϊαπομξρΰτσρ hw_set(),
 *      ιμι χςυώξυΰ δμρ οπισαξιρ εδιξστχεξξοηο
 *      δισπμερ. χ ποσμεδξεν σμυώαε νοφξο
 *      ιϊνεξιτψ λομιώεστχο λμαχιϋ, ι/ιμι ϊαξεστι
 *      λοξσταξτξωε οπισαξιρ χ ταβμιγυ kbl (σν. ξιφε).
 */
      { 'ku', 0 },    { 'kd', 0 },    { 'kl', 0 },    { 'kr', 0 },
      { 'k1', 0 },    { 'k2', 0 },    { 'k3', 0 },    { 'k4', 0 },
      { 'IC', 0 },    { 'DC', 0 },    { 'IL', 0 },    { 'DL', 0 },
      { 'kh', 0 },    { 'f.', 0 },    { 'f-', 0 },    { 'f,', 0 },
      { 'f0', 0 },    { 'f1', 0 },    { 'f2', 0 },    { 'f3', 0 },
      { 'f4', 0 },    { 'f5', 0 },    { 'f6', 0 },    { 'f7', 0 },
      { 'f8', 0 },    { 'f9', 0 },
      { 0, 0 },
};

/* οπισαξιε χοϊνοφξοστεκ χωχοδα ξα όλςαξ */
/*
 * ζυξλγιρ hw_set ϊανεξρετ στςολι, λοτοςωε ρχμρΰτσρ
 * λμΰώανι χοϊνοφξοστεκ τεςνιξαμα, σν. termcap(5)
 * ξα στςολι ϊξαώεξικ ότιθ λμΰώεκ.
 * δμρ οπισαξιρ εδιξστχεξξοηο τεςνιξαμα ϊανεξιτε λμΰώι ξα ϊξαώεξιρ
 * (τ.ε. ξα σοοτχετστχυΰύιε ESC-ποσμεδοχατεμψξοστι)
 * ι πονεστιτε χ ότον ζακμε οπισαξιε πυστοκ ζυξλγιι "hw_set() {}"
 */
char *tcapo[] = {
	"cm", "cl", "cd", "ce", "ks", "ke",
	"cs", "sr", "sf", "al", "dl",
	"so", "se", "us", "ue",
	"md", "mr", "mb", "mk", "me",
	"bl", "vb",
	"lh",   /* ινρ λμαχιατυςω */
	0 };

/* σχρϊψ ζιϊιώεσλιθ ι μοηιώεσλιθ λοδοχ, α ταλφε ινεξ λμαχιϋ */
KBL kbl[KBLSIZE] = {
		/*==== οσξοχξωε λοναξδω */
      { 'k3',   'KO',   "PF3    " },    /* KEYPAD ON */
      { 'ku',   'AU',   "χχεςθ  " },
      { 'kd',   'AD',   "χξιϊ   " },
      { 'kl',   'AL',   "χμεχο  " },
      { 'kr',   'AR',   "χπςαχο " },
      { '^M',   'NL',   "RETURN " },    /* χχοδ (λοξεγ στςολι) */
      { 'de',   'DE',   "DEL    " },    /* ϊαβοκ */
      { 'k1',   'GL',   "PF1    " },    /* πςεζιλσ (GOLD) */
      { 'k2',   'HE',   "PF2    " },    /* σπςαχ. ιξζ. (HELP) */
      { 'k4',   'PR',   "PF4    " },    /* πεώατψ όλςαξα */
      { '^A',   'RE',   "CTRL-A " },    /* οσχεφιτψ (REFRESH) */
      { '^I',   'TA',   "TAB    " },    /* ταβυμργιρ */
		/*==== δοπομξιτεμψξωε λοναξδω */
      { 'f0',   'U0',   0         },
      { 'f1',   'U1',   0         },
      { 'f2',   'U2',   0         },
      { 'f3',   'U3',   0         },
      { 'f4',   'U4',   0         },
      { 'f5',   'U5',   0         },
      { 'f6',   'U6',   0         },
      { 'f7',   'U7',   0         },
      { 'f8',   'U8',   0         },
      { 'f9',   'U9',   0         },
      { 'f.',   'U.',   0         },
      { 'f-',   'U-',   0         },
      { 'f,',   'U,',   0         },
      { '^J',   'NL',   0         },    /*==== σιξοξινω */
      { '^H',   'HE',   0         },
      { '^E',   'GL',   0         },
      { 'kh',   'GL',   0         },
      { '^R',   'RE',   0         },
      { 0 },
	};


LPA lpaout[LPASIZE] = {
	{       0,      0       },
	{       ' ',    0       },              /* TXT  */
	{       ' ',    0       },              /* HDR  */
	{       '>',    0       },              /* VAR  */
	{       '>',    0       },              /* ALT  */
	{       '-',    0       },              /* MSE  */
	{       ' ',    A_US|A_MD },            /* ERR  */
	{       '!',    A_SO    },              /* ATT  */
};

LPA lpainp[LPASIZE] = {
	{       0,      0       },
	{       ' ',    A_SO    },              /* TXT  */
	{       ' ',    A_SO    },              /* HDR  */
	{       '#',    A_SO    },              /* VAR  */
	{       '?',    A_SO    },              /* ALT  */
	{       '*',    A_SO    },              /* MSE  */
	{       ' ',    A_US|A_MD },            /* ERR  */
	{       ' ',    A_MB    },              /* ATT  */
};
